# NP完全性理论

## 为什么多项式时间是易解的？

Θ(n100)也很难处理，但是需要如此高次的多项式时间问题非常少；

多项式时间具有很好的封闭性，无论加乘，多项式依然是多项式。

## 停机问题

判断任意一个程序是否能在有限的时间内结束运行。

是否存在一个程序P，对于任意输入的程序w，能够判断w会在有限时间内结束或者死循环。

## 判定问题

判定问题decision problems, 输出为“yes” or “no” (or, more formally, “1” or “0”). 

判断是否有一种能够解决某一类问题的能行算法的研究课题。

可以将搜索问题，生成问题，优化问题等转换成一个相关的判定问题

## 判定问题VS优化问题

如果优化问题是易解问题，那么它相关的判定问题也是易解问题

如果判定问题是难解问题，那么优化问题一定是难解问题 

将优化问题规约为判定问题，通过判定问题判断优化问题的下界

## P与NP

**P类（Polynomial）**  

所有多项式时间可解的判定问题组成的问题类

**NP （Nondeterministic Polynomial）（非确定性多项式时间算法）**   

--所有多项式时间可验证的判定问题.    

--有可能多项式时间可解（P），也有可能多项式时间不可解  

 --哈密尔顿回路

​			在图中是否存在一个简单回路，能够访问每个结点一次。

​	 	   目前没有多项式解法但是很容易在多项式时间内验证一个回路是否为哈密尔顿回路

## 确定性图灵机

### 图灵机基本思想

图灵的基本思想是用机器来模拟人们用纸笔进行数学运算的过程，他把这样的过程看作下列两种简单的动作：

​	在纸上写上或擦除某个符号；
​	把注意力从纸的一个位置移动到另一个位置；
而在每个阶段，人要决定下一步的动作，依赖于（a）此人当前所关注的纸上某个位置的符号和（b）此人当前思维的状态。

![](/Users/lixiang/Downloads/300px-Turing_machine_2a.gif)

在某些模型中，纸带移动，而未用到的纸带真正是“空白”的。要进行的指令（ q4）展示在扫描到方格之上（由Kleene（1952）p.375绘制）。

![](/Users/lixiang/Downloads/300px-Turing_machine_2b.gif)

在某些模型中，读写头沿着固定的纸带移动。要进行的指令（ q1）展示在读写头内。在这种模型中“空白”的纸带是全部为0的。有阴影的方格，包括读写头扫描到的空白，标记了1,1,B的那些方格，和读写头符号，构成了系统状态。(由Minsky (1967) p.121绘制)。

为了模拟人的这种运算过程，图灵构造出一台假想的机器，该机器由以下几个部分组成：

​	1.一条无限长的纸带TAPE。纸带被划分为一个接一个的小格子，每个格子上包含一个来自有限字母表的符号，字母表中有一个特殊的符号表示空白。纸带上的格子从左到右依次被编号为0, 1, 2, ...，纸带的右端可以无限伸展。
​	2.一个读写头HEAD。该读写头可以在纸带上左右移动，它能读出当前所指的格子上的符号，并能改变当前格子上的符号。
​	3.一套控制规则TABLE。它根据当前机器所处的状态以及当前读写头所指的格子上的符号来确定读写头下一步的动作，并改变状态寄存器的值，令机器进入一个新的状态。
​	4.一个状态寄存器。它用来保存图灵机当前所处的状态。图灵机的所有可能状态的数目是有限的，并且有一个特殊的状态，称为停机状态。参见停机问题。
注意这个机器的每一部分都是有限的，但它有一个潜在的无限长的纸带，因此这种机器只是一个理想的设备。图灵认为这样的一台机器就能模拟人类所能进行的任何计算过程。

### 图灵机的正式定义

![](/Users/lixiang/Downloads/我爱学习/高级算法/笔记/图片/np/图灵机的正式定义.png)


## 非确定性图灵机

**非确定性图灵机（ NDTM ）**：一个k带的非确定性图灵机M是一个7元组：(Q，T，I，δ，b，q0，qf)。与确定性图灵机不同的是非确定性图灵机允许移动函数δ具有不确定性，即对于QTk中的每一个值(q;x1,x2,…,xk)，当它属于δ的定义域时，Q(T{L，R，S})k中有唯一的一个子集δ(q;x1,x2,…,xk)与之对应。可以在δ(q;x1,x2,…,xk)中随意选定一个值作为它的函数值。

## P类和NP类问题

**P(Polynomial)类**问题是确定性计算模型下的易解问题类，即在确定图灵机模型下多项式时间可解的问类**NP(Nondeterministic Polynomial)** 在非确定图灵机模型下多项式时间内可解的判定问题，而在确定性图灵机下可验证的问题类。所以它是多项式时间非确定性算法可解

**由于一台确定性图灵机可看作是非确定性图灵机的特例，所以可在多项式时间内被确定性图灵机接受的语言也可在多项式时间内被非确定性图灵机接受。故P <u>U右</u>NP。** 

## 如何证明一个判定问题是NP问题

### 如何设计一个非确定性多项式时间算法

无法直接计算得到，只能通过间接的“猜测”得到，通过多项式时间验证这个猜测是否正确

猜测

验证

**哈密尔顿回路**：一个图是否包含哈密尔顿会路

猜测：一个包含所有点的序列p

验证：验证p是否为哈密尔顿回路，返回yes或者no

## NP完全问题，NPC

一个问题是NP完全问题：

它是NP问题

它和NP中任一问题一样难。也就是说如果任何问题都能通过多项式时间算法转换（规约）为这个NP问题，那么这个问题就是NP完全问题。也是最难的问题。 

如果一个NPC问题可以在多项式时间可解，那么所有NPC问题都可多项式时间可解，那样P=NP 

## 如何证明一个问题是NPC问题

是一个NP问题

一个已知的NPC问题可以规约成该问题

第一个NPC问题

## 规约Reductions

一个问题A可以规约为问题B的含义是，可以用问题B的解法解决问题A（或者说，问题A可以“变成”问题B）

如：求解一元一次方程（问题A）可规约为求解一元二次方程（问题B）

一元二次方程的二次项系数为0用

求解一元二次方程解法来解一元一次方程

如：哈密尔顿回路可以规约为TSP问题（旅行商问题）

TSP是完全图中求最小权的哈密尔顿回路

归约具有传递性如果问题A可归约为问题B，问题B可归约为问题C，则问题A一定可归约为问题C。

归约性是指可“多项式归约”，即问题A可通过多项式时间变为问题B。

问题A归约为问题B，记为 A PB

A大于B的难度不会超过一个多项式时间因子

若果B∈P，则A ∈P如果A∈NPC，则 B∈NPC 

## NP完全性

完全性：L为NP完全问题

称之为完全，NP完全问题归约了所有的NP问题。任意一个NP完全问题如能够在多项式时间内解决，那么NP中的每个一个问题都可用多项式时间解决，即 P=NP

## 如何证明一个问题是NPC

公式可满足性问题SAT：

​	n个布尔变量x1，x2,..., xn;

​	m个布尔连接词：布尔连接词是任何具有一个或两个输入和一个输出的布尔函数，如与、或、非、蕴含、当且仅当；	括号。

证明其为NPC问题分两个步骤：

​	SAT是NP问题：多项式时间可验证一个表达式为真为假

​	CIRCUIT-SAT可规约为SAT

## 3-CNF可满足性

文字

​	一个变量或者变量的非

合取范式

​	一个布尔公式可以表示为一个字句的与，而每 个字句都是一个或者多个文字的或

3-CNF

​	每个子句有且只有3个文字

3-CNF可满足性

​	3-CNF这种形式的布尔公式是否具有可满足性

3-CNF-SAT：如果一个布尔公式可以表示为所有子句对“与”，且每个子句都是一个或多个文字对“或”，则为CNF，如果有三个不同对文字，则为3CNF

3合取范式形式的布尔公式的可满足性问题是NP完全的

这是一个NP问题

这个问题可以归约为

​	将布尔公式转换为子句的合取式

​	将子句转换为合取范式

​	将子句转为3个文字的合取取式

## 典型NP完全问题

![](/Users/lixiang/Downloads/我爱学习/高级算法/笔记/图片/np/典型NP完全问题.png)

团问题

顶点覆盖问题

哈密顿回路问题

旅行商问题

子集和问题

### 团问题

给定无向图G=(V,E)中的团(clique)，是一个顶点子集V’ ⊆V，其中每一对顶点间都由E中的一条边连接。

一个团是G的一个完全子图

团的规模是指它所包含的顶点数。

团问题是关于寻找图中规模最大的团的最优化问题。

判定问题：在图中是否存在一个给定规模为k的团？            

​		CLIQUE={<G,k>: G是一个包含规模为k的团的图}



团问题是NP完全的

证明方法：

​	这是一个NP问题

​		假设团中的顶点集V’ ⊆V，对于任意一对顶点u，v∈V’,通过检查边(u, v)是否属于E，就可以在多项式内确定V’是否为团

​	可以从其他NPC问题规约得到